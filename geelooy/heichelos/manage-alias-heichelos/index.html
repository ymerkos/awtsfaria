<!--B"H-->
<!--B"H-->
<?<script>
    var ac = $_GET["action"];
    var heichel = $_GET["heichel"];
    var alias  = $_GET["alias"];
    var ret = $_GET["returnURL"]
    
    return $a("nav/page.html", {
        tochen: /*html*/`
        
            <link rel="stylesheet" type="text/css" href="/profile/alias-manage/style.css">
            <div class="container">
                <a href="${
                   ret?ret:"/heichelos?alias="+alias
                }"><-Back</a>
                <h1 id="h-header">${
                    ${
                            ac == "update" ? "Update Heichel"
                            : "Create New Heichel"
                        }
                    
                }</h1>
                <form id="heichel-form">
                    <label for="heichel-name">heichel Name:</label><br>
                    <input type="text" id="heichel-name" name="heichel-name" required><br><br>
                    <label for="heichel-description">heichel Description:</label><br>
                    <textarea id="heichel-description" name="heichel-description"></textarea><br><br>
                    <div class="optional-id">
                        <label for="heichel-id">Custom heichel ID:</label>
                        <input type="text" id="heichel-id" name="heichel-id">
                        <span class="tooltip">?</span>
                        <div class="tooltiptext">Custom heichel ID is optional. If not provided, it will be generated automatically based on the heichel Name.</div>
                    </div>
                    <span id="id-validation"></span><br><br>
                    <div class="form-btns">
                        <button type="submit">${
                            ac == "update" ? "Update"
                            : "Submit"
                        }</button>
                        ${
                            ac == "update" ? /*html*/`
                                <button class="delete" id="delete">Delete</button>
                            ` : ""
                        }
                    </div>
                </form>
            </div>
<script>
(()=>{
var p=new URLSerchParams(location.search)
var heichelID=p.get("heichel")
var aliasID=p.get("alias")
var ac=p.get("action")
if(ac!="update"){
return;
}
if(!aliasID||!heicehlID){
return alert("no alias or heichel provided");
}
try {
var r=await fetch("/api/social/alias/"
+aliasID
+"/heichelos/"+
heichelID);
window.det=await r.json();
} catch(e){
alert("issue getting heichel: "+e);
}
})();


console.log(
'B"H',
window det
)

if(window.det){
var d=document.getElementById("heichel-description")
var nd=document.getElementById("heichel-name")
if(d){
d.value=d.innerHTML=det.description||"";
}

if(nd){
nd.value=det.name||"";
}
}

</script>

            <script src="script.js"></script>
        `
    })
</script>?>
