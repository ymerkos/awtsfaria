 <!--<h2>B"H</h2>-->
<?Awtsmoos
var a=$_GET.alias
if(a) {
var o =await fetchAwtsmoos(
"/api/social/aliases/"+a+"/ownership"
)
if(o.yes){
$sd.alias=a
}

} else {
var al=await fetchAwtsmoos(
"/api/social/aliases/details"
)

if(al&&al.length){
al.forEach(z=>
h+=`<a href="/email?alias=${z.id}">z.name</a>
<br>`
)
}


}
return getT("bh.html");

?>

<?Awtsmoos
if(!$sd.alias) return "No alias that you own";
var a=$sd.alias;

var html=""
html+= "Viewing as alias: "+$sd.alias;

var f=$_GET.from;

if(!f) {
var emails = await db.get("/emails/"+a
+"_at_awtsmoos.one/from");
if(emails&&emails.length) {
html+=emails.map(r=>`<a
href="/emails?alias=${
$sd.a

}&from=${r}">r</a>`)
} else {
 html+=" No emails to this alias yet";
}
} else {

var tm=$_GET.time;
if(!tm){
var emails = await db.get("/emails/"+a
+"/_at_awtsmoos.one/from/"+f+"/time");
if(emails&&emails.length) {
html+=emails.map(
t=>`<a
href="/emails?alias=${
$sd.a

}&from=${f}&time=${t}">${new Date(t)+" " +t}</a>`
)


}


}else {
var str="/emails/"+a
+"/_at_awtsmoos.one/from/"+f
+"/time/"+tm+"/data";

var email = await db.get(str);
if(email) {
html+=`<div class="email">${email}</div>`

} else html += "email not found "+str

}


return html
?>
