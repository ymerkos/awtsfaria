<!--B"H-->
<html class=" w-mod-js"><head></head><body><meta charset="utf-8">
    <title>Yos's Awesome Site</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    
    <link href="style.css" rel="stylesheet" type="text/css">
    

    <style> 
        #uploadBtn {
            display:none;
        }
    </style>
    <div class="navbar-logo-left">
        <div class="navbar w-nav">
            <div id="w-node-_90fa576d-80dd-81ca-f6d9-2c2f234397ab-e36461a4" 
            class="w-layout-layout quick-stack-2 wf-layout-layout">
                <div class="w-layout-cell cell-3">
                    
                    <a href="#" class="button-2 w-button">Texts</a>
                    <a href="#" class="button-2 w-button">Community</a>
                    <a href="#" class="button-2 w-button">Donate</a>
                    <a href="./upload.html" 
                    target="_blank"
                    class="button-2 w-button" id="uploadBtn">
                        Upload
                    </a>
                </div>
                <div class="w-layout-cell cell-2">
                    <a href="#" id="awtsmoos-sign-in" class="button w-button">Sign in</a></div>
            </div>
        <div class="w-nav-overlay" id="w-nav-overlay-0"></div></div>
        <div class="navbar-2 w-nav"><div class="w-nav-overlay" id="w-nav-overlay-1"></div></div>
    </div>
    <div id="w-node-_8bf56268-41ee-bbb0-2231-b1616b053fed-e36461a4" 
    class="w-layout-layout quick-stack-3 wf-layout-layout">
    <div class="w-layout-cell cell-4">

    </div><div class="w-layout-cell">
        <div class="w-layout-blockcontainer container-2 w-container" id="mainText">
            <div class="div-block">
                <div class="text-block">חוקת - בלק א</div>
            </div>
            <p class="paragraph-selected">
                <strong>א.</strong> מ‘הָאט שוין פיל מָאל גערעדט וועגן דעם מאמר פון של“ה,<sup>1</sup> אז אלע מועדי השנה, אפילו „מועדי דרבנן“, הָאבן א שייכות צו די פרשיות התורה אין וועלכע זיי זיינען חל. דערפון איז פַארשטַאנדיק, אז דער „חג הגאולה“<sup>2</sup> פון י“ב־י“ג תמוז - ווען דער רבי דער שווער איז אינגַאנצן בַאפרייט געווָארן פון זיין מאסר און גלות - הָאט ַא שייכות צום תוכן פון די פרשיות חוקת־ בלק<sup>3</sup>.</p>
                <p class="paragraph">און אין דעם גופא זיינען דָא דריי נקודות: א) די שייכות צו פ‘ חוקת, ב) די שייכות צו פ‘ בלק, ג) די שייכות צו ביידע סדרות צוזַאמען, ווָארום - ווי גערעדט פיל מָאל<sup>4</sup> - ווען צוויי סדרות זיינען מחוברות און מ‘לייענט זיי צוזַא־ מען אין איין שבת, איז זייער התחברות אין אן אופן אז זיי ווערן איין סדרה די חלוקת הקריאה איז אויף שבעה קרואים, עס איז דָא נָאר איין הפטורה, ועוד; ובמילא איז פַארשטַאנדיק, אז אין צוגָאב צום בַאזונדערן תוכן ווָאס איז דָא איןיעדער סדרה בפני עצמה, איז דָא ַא תוכן משותף פון ביידע סדרות ווָאס דערפַאר קענען זיי נתחבר ווערן ַאלס איין סדרה און די שייכות פון חג הגאולה י“ב־י“ג תמוז צו חוקת־בלק איז אויך צו זייער תוכן משותף ווי ס‘איז מודגש אין קביעות שנה זו, ווָאס י“ב תמוז איז חל בשבת פ‘ חוקת־בלק.</p><p class="paragraph">ב. דער נָאמען פון דער (ערשטער) סדרה איז „חוקת“. דער פשוט‘ער טייטש פון „חוקה“ איז - א ציווי ווָאס מען הָאט ניט קיין טעם אויף אים, און מ‘איז אים מקיים בלויז דערפַאר ווייל „חקה חקקתי גזירה גזרתי“<sup>6</sup> - דָאס איז דער רצון פון דעם אויבערשטן.</p>
        </div></div></div>
    
    

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import {getFirestore,
            collection,
            query,
            where,
            getDocs 
        } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        import { getAuth, 
            createUserWithEmailAndPassword ,
            signInWithEmailAndPassword,
            GoogleAuthProvider,
            signInWithPopup,
            onAuthStateChanged ,
            signOut
        } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCpzvN9j3IWAbPQeoz3Vs4H7Tqb7bhWQEY",
            authDomain: "awtsfaria.firebaseapp.com",
            projectId: "awtsfaria",
            storageBucket: "awtsfaria.appspot.com",
            messagingSenderId: "987507227434",
            appId: "1:987507227434:web:35506a791aa36ac38cbc53"
        };

        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const signInBtn = document.getElementById("awtsmoos-sign-in");
        var isSignedIn = false;
        // Set initial status
        document.addEventListener("DOMContentLoaded", () => {
          
            signInBtn.innerText = "Checking...";
            
            onAuthStateChanged(auth, (user) => {
                console.log("Changed!",user)
                if (user) {
                    isSignedIn;
                    signInBtn.innerText = 'Sign Out';
                        signInBtn
                        .onclick = signOutUser;
                    uploadBtn.style.display="block";
                } else {
                    signInBtn.innerText = 'Sign In';
                        signInBtn
                        .onclick = googleSignIn;
                    uploadBtn.style.display="none";
                }
            });



            // Parse the URL parameters
            var params = getUrlVars();
            var parshaId = params['parsha'];
            var sichaNum = params['sicha'];
            var volume = params['volume'];
            
            const db = getFirestore();
            // Fetch the document from Firestore
           // Fetch the document from Firestore
            const q = query(
                collection(db, 'books', 'Likkutei Sichos', 'Sichos'),
               // where('Parsha_Id', '==', parshaId),
              //  where('Sicha_num', '==', sichaNum),
              //  where('Volume', '==', volume)
            );

            
            getDocs(q)
            .then((querySnapshot) => {
                console.log("Hi there!",querySnapshot)
                querySnapshot.forEach((doc) => {
                    console.log("LOL!",doc)
                // Doc data
                var docData = doc.data();
                    console.log("Dat",docData)
                // Now, you can populate your web viewer using docData.Main_Text and docData.Footnotes, etc.
                document.getElementById('mainText').innerHTML = parseData(docData.Main_text)
                //document.getElementById('footnotes').innerHTML = docData.Footnotes;
                
                });
            })
            .catch((error) => {
                console.log("Error fetching document:", error);
            });
        });

        var dp = new DOMParser()
        function parseData(inputHTML) {
            var dc = dp.parseFromString(inputHTML, "text/html");
            var p = dc.querySelectorAll("p")
            Array.from(p).forEach(w=>w.classList.add("paragraph"));

            var h1 = dc.querySelector("h1");
            var cnt = h1.textContent;
            h1.innerHTML = `<div class="div-block">
                <div class="text-block">${cnt}</div>
            </div>`
            return dc.body.innerHTML
        }
        function signOutUser() {
            signOut(auth)
                .then(() => {
                    alert("User signed out successfully.");
                })
                .catch((error) => {
                    alert("Error signing out: " + error.message);
                });
        }

        function googleSignIn() {
            const provider = new GoogleAuthProvider();
            signInWithPopup(auth, provider)
                .then((result) => {
                    alert("Google Sign-In successful.");
                })
                .catch((error) => {
                    alert("Error with Google Sign-In: " + error.message);
                });
        }

       
        // Function to get URL parameters
            function getUrlVars() {
            var vars = {};
            var parts = window
            .location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
                vars[key] = value;
            });
            return vars;
            }
        window.googleSignIn=googleSignIn;

        </script>
</body>


</html>