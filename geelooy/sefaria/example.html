B"H

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Scrolling Highlight</title>
    <style>
        #scroll-container {
            height: 300px;
            overflow-y: auto;
            position: relative;
            border: 1px solid #ccc;
            padding-top: 100px; /* Space for the reference div */
        }

        .paragraph {
            min-height: 50px;
            margin: 10px;
            border: 1px solid #eee;
        }

        .highlighted {
            background-color: yellow;
        }

        
    </style>
</head>
<body>

<div id="scroll-container">
</div>

<script>
    
    document.addEventListener('DOMContentLoaded', function () {
    const container = document.getElementById('scroll-container');
    const reference = document.getElementById('reference');

    function generateParagraphs(num) {
        for (let i = 0; i < num; i++) {
            let para = document.createElement('div');
            para.className = 'paragraph';
            para.innerText = 'Paragraph ' + (i + 1);
            container.appendChild(para);
        }
    }

    generateParagraphs(30);

    // Function to highlight the topmost fully visible paragraph
    function highlightTopParagraph() {
        let highlighted = false;
        container.querySelectorAll('.paragraph').forEach(para => {
            const paraTop = para.offsetTop - container.scrollTop;
            const paraBottom = paraTop + para.clientHeight;
            // Check if the paragraph is fully within the visible area of the container
            if (paraTop >= 0 && paraBottom <= container.clientHeight && !highlighted) {
                para.classList.add('highlighted');
                highlighted = true;
            } else {
                para.classList.remove('highlighted');
            }
        });
    }

    // Initial highlight when content is loaded
    highlightTopParagraph();

    // Highlight top paragraph on scroll
    container.addEventListener('scroll', highlightTopParagraph);

    let options = {
        root: container,
        threshold: 1
    };

    let observer = new IntersectionObserver((entries, observer) => {
        // Call highlight function whenever an intersection occurs
        highlightTopParagraph();
    }, options);

    document.querySelectorAll('.paragraph').forEach(p => {
        observer.observe(p);
    });
});

</script>

</body>
</html>
